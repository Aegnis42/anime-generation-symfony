{% extends 'base.html.twig' %}

{% block body %}
    <h1 class="text-3xl text-center mt-3">Bienvenue sur Anime Generation</h1>
    <h2 class="text-xl ml-40 mt-5">les plus recents</h2>
    <section class="mx-40 mt-5 overflow-x-hidden whitespace-nowrap py-2">
        {% for anime in latestAnime %}
            <article class="inline-block relative rounded overflow-hidden shadow-lg m-2 h-96 w-52 cursor-pointer transition duration-500 ease-in-out transform hover:scale-105">
                <a href="">
                    <img class="w-full h-full object-cover" src="{{ anime.images.jpg.large_image_url }}" alt="Cover Image">
                    <div class="px-6 py-4 bg-black bg-opacity-50 text-white absolute bottom-0 w-full">
                        <h2 class="font-bold text-xl mb-2 truncate">{{ anime.title }}</h2>
                        <p class="text-base">
                            {{ anime.synopsis }}
                        </p>
                    </div>
                </a>
            </article>
        {% endfor %}
    </section>
    <h2 class="text-xl ml-40 mt-5">Les plus populaires</h2>
    <section class="mx-40 mt-5 overflow-x-hidden whitespace-nowrap py-2">
        {% for anime in popularAnime %}
            <article class="inline-block relative rounded overflow-hidden shadow-lg m-2 h-96 w-52 cursor-pointer transition duration-500 ease-in-out transform hover:scale-105">
                <a href="#">
                    <img class="w-full h-full object-cover" src="{{ anime.images.jpg.large_image_url }}" alt="Cover Image">
                    <div class="px-6 py-4 bg-black bg-opacity-50 text-white absolute bottom-0 w-full">
                        <h2 class="font-bold text-xl mb-2 truncate">{{ anime.title }}</h2>
                        <p class="text-base">
                            {{ anime.synopsis }}
                        </p>
                    </div>
                </a>
            </article>
        {% endfor %}
    </section>
    <h2 class="text-xl ml-40 mt-5">Suggestion</h2>
    <section class="mx-40 mt-5 overflow-x-hidden whitespace-nowrap py-2 mb-5">
        {% for suggestion in animeSuggestions|slice(0, 13) %}
            {% for entry in suggestion.entry %}
                <article class="inline-block relative rounded overflow-hidden shadow-lg m-2 h-96 w-52 cursor-pointer transition duration-500 ease-in-out transform hover:scale-105">
                    <a href="#">
                        <img class="w-full h-full object-cover" src="{{ entry.images.jpg.large_image_url }}" alt="Cover Image">
                        <div class="px-6 py-4 bg-black bg-opacity-50 text-white absolute bottom-0 w-full">
                            <h2 class="font-bold text-xl mb-2 truncate">{{ entry.title }}</h2>
                            <p class="text-base">
                                {{ suggestion.content }}
                            </p>
                        </div>
                    </a>
                </article>
            {% endfor %}
        {% endfor %}
    </section>
    
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.7.0/jquery.min.js"></script>
    <script>
        $(document).ready(function(){
            $('section').on('mousewheel', function(e){
                e.preventDefault();
                var scrollAmount = e.originalEvent.wheelDelta / 3;
                $(this).scrollLeft($(this).scrollLeft() - scrollAmount);
            });
        });
    </script>
{% endblock %}
